# 2.4.3 Převody mezi RG a RV

<a id="algo-rg-to-rv"></a>
!!! Algorithm "Regulární gramatika → Regulární výraz"

    ### Regulární gramatika → Regulární výraz {#algo-rg-to-rv}

    1.  **Pomocí metody regulárních rovnic:**
        *   Vytvoříme soustavu pravých regulárních rovnic z pravidel gramatiky (nahradíme $\to$ za $=$ a $\mid$ za $+$).
    2.  **Pomocí metody eliminace neterminálních symbolů:**
        *   Podobná eliminaci stavů u KA. Postupně odstraňujeme neterminály a nahrazujeme je v pravidlech regulárními výrazy.

<a id="algo-rg-rv-rovnice"></a>
!!! Algorithm "Metoda regulárních rovnic"

    ### Metoda regulárních rovnic {#algo-rg-rv-rovnice}

    Vytvoříme soustavu pravých regulárních rovnic. V pravidlech gramatiky zaměníme „$\mid$“ za „$+$“ a „$\to$“ za „$=$“. Soustavu rovnic řešíme pro neznámou reprezentující **počáteční neterminál**.

    $$
    \begin{aligned}
    S &\to \alpha_1 \mid \alpha_2 \mid \dots & S &= \alpha_1 + \alpha_2 + \dots \\
    A &\to \beta_1 \mid \beta_2 \mid \dots & \Rightarrow \quad A &= \beta_1 + \beta_2 + \dots \\
    &\dots & &\dots
    \end{aligned}
    $$

<a id="algo-rg-rv-eliminace"></a>
!!! Algorithm "Metoda eliminací neterminálních symbolů"

    ### Metoda eliminací neterminálních symbolů {#algo-rg-rv-eliminace}

    Metoda eliminací neterminálních symbolů je podobná eliminaci stavů. Postupujeme tak, že z gramatiky postupně vylučujeme neterminály a nahrazujeme je regulárními výrazy. Před eliminací každého neterminálu je nutné gramatiku převést do „výchozího tvaru“:

    *   Všechny $n$-tice pravidel
        
        $$A \to \alpha_1 B, A \to \alpha_2 B, \dots, A \to \alpha_n B$$
        
        (kde $A, B \in N$ a $\alpha_1, \dots, \alpha_n$ jsou RV) nahradíme pravidlem
        
        $$A \to (\alpha_1 + \alpha_2 + \dots + \alpha_n)B$$
        
        Například $S \to 1B \mid 2B \mid 0B$ nahradíme za $S \to (1+2+0)B$.

    **Postup:**

    1.  Do gramatiky přidáme nové neterminály $S'$ a $F'$ a pravidla $S' \to S$ a $F' \to \varepsilon$. $S'$ je nový počáteční neterminál. $S$ je původní počáteční neterminál.
    2.  Všechny pravé strany pravidel (kromě $F' \to \varepsilon$), které neobsahují neterminální symboly, zřetězíme s neterminálem $F'$. Například $S \to 1$ zaměníme za $S \to 1F'$.
    3.  Postupně eliminujeme neterminální symboly (dokud nezůstane pouze $S'$ a $F'$), před každou eliminací upravíme gramatiku do „výchozího tvaru“:
        *   Zvolíme libovolný neterminál $A$, který včetně všech jeho pravidel z gramatiky vyloučíme. Např.: $A \to (1+21^*)B \mid 1F'$.
        *   Ve zbývajících pravidlech vyhledáme ta, která náš odstraňovaný neterminál na pravé straně používají. Tento neterminál nahradíme příslušným regulárním výrazem. Velmi jednoduše řečeno vyřešíme regulární rovnici pro odstraňovaný neterminál a toto řešení dosadíme.
    4.  Pokud máme v gramatice pouze dvě pravidla ve tvaru: $S' \to \alpha F'$ ($\alpha$ je RV) a $F' \to \varepsilon$, eliminace končí a $\alpha$ je výsledný regulární výraz $V$.

---

<a id="algo-rv-to-rg"></a>
!!! Algorithm "Regulární výraz → Regulární gramatika"

    ### Regulární výraz → Regulární gramatika {#algo-rv-to-rg}

    1.  **Pomocí metody derivací:**
        *   Podobně jako u převodu na KA, ale místo stavů vytváříme neterminály a pravidla tvaru $V \to aV'$.
    2.  **Pomocí metody postupné konstrukce:**
        *   Sestavíme elementární gramatiky.
        *   Skládáme je pomocí algoritmů pro sjednocení, součin a iteraci gramatik.


<a id="algo-rv-rg-derivace"></a>
!!! Algorithm "Metoda derivací"

    ### Metoda derivací {#algo-rv-rg-derivace}

    1.  Původní regulární výraz označíme $V_0$ a prohlásíme jej za počáteční neterminál gramatiky.
    2.  Výraz $V_0$ zderivujeme postupně dle všech symbolů abecedy, čímž mohou vzniknout nové výrazy (tj. nové neterminální symboly). Pokud například $\frac{dV_0}{da} = V_1$, poté:
        *   (a) pokud mezi aktuálními neterminály neexistuje regulární výraz $V_i$ podobný regulárnímu výrazu $V_1$, vytvoříme nový neterminál $V_1$ a v gramatice přidáme pravidlo $V_0 \to aV_1$. Pokud navíc $\varepsilon \in h(V_1)$, přidáme též pravidlo $V_0 \to a$.
        *   (b) pokud mezi aktuálními neterminály existuje regulární výraz $V_i$ podobný regulárnímu výrazu $V_1$, nový neterminál nevytváříme a v gramatice přidáme pravidlo $V_0 \to aV_i$. Pokud navíc $\varepsilon \in h(V_i)$, přidáme též pravidlo $V_0 \to a$.
    3.  Pokud v gramatice existuje neterminální symbol, kde odpovídající regulární výraz nebyl zderivován postupně pro všechny symboly abecedy, aplikujeme pro tento výraz stejný postup jako pro regulární výraz $V_0$ ve druhém kroku.
    4.  Pokud $\varepsilon \in h(V_0)$, k počátečnímu neterminálu $V_0$ přidáme $\varepsilon$-pravidlo a zkontrolujeme, zdali se počáteční neterminál nevyskytuje též na pravé straně. Pokud ano, musíme gramatiku upravit.

<a id="algo-rv-rg-postupna"></a>
!!! Algorithm "Metoda postupné konstrukce"

    ### Metoda postupné konstrukce {#algo-rv-rg-postupna}

    1.  Sestavíme gramatiky generující jednotlivé elementární regulární výrazy vyskytující se v daném výrazu (tj. $\varepsilon, \emptyset$ nebo symbol abecedy).
        *   $G_\varepsilon = (\{S\}, \emptyset, \{S \to \varepsilon\}, S)$
        *   $G_\emptyset = (\{S\}, \emptyset, \emptyset, S)$
        *   $G_a = (\{S\}, \{a\}, \{S \to a\}, S)$
    2.  Postupně tyto elementární gramatiky skládáme do větších celků tvořících daný regulární výraz, a to dle standardních algoritmů pro skládání regulárních gramatik (sjednocení, zřetězení, iterace).

!!! Implication "Tip pro zjednodušení práce"
    Práci s převody si můžeme také „ulehčit“ následovně:

    *   u převodu RG $\to$ (KA nebo RV) odstraníme zbytečné symboly z gramatiky,
    *   u převodu KA $\to$ (RG nebo RV) odstraníme nedosažitelné a zbytečné stavy z automatu,
    *   u převodu RV $\to$ (KA nebo RG) si regulární výraz případně zjednodušíme.
