# 2.1.1 Návrh regulární gramatiky pro zadaný jazyk

<a id="algo-sjednoceni-rg"></a>
!!! Algorithm "Sjednocení jazyků"

    ### Sjednocení jazyků {#algo-sjednoceni-rg}

    Máme dvě regulární gramatiky $G_1 = (N_1, \Sigma_1, P_1, S_1)$ a $G_2 = (N_2, \Sigma_2, P_2, S_2)$. Jak vytvoříme **regulární gramatiku** $G$ generující **sjednocení jazyků** $L(G_1)$ a $L(G_2)$, tedy jazyk $L = L(G_1) \cup L(G_2)$?

    Gramatiku $G = (N, \Sigma, P, S)$ vytvoříme následovně:

    1.  $N = N_1 \cup N_2 \cup \{S\}$
        Za předpokladu, že $N_1 \cap N_2 = \emptyset$ a zároveň $S \notin (N_1 \cup N_2)$, sjednotíme množiny neterminálů a přidáme nový počáteční neterminál $S$. Pokud ovšem $N_1 \cap N_2 \neq \emptyset$, pak například neterminály z množiny $N_1$ přejmenujeme tak, aby byly různé od neterminálů množiny $N_2$. Obdobně pomocí přejmenování zajistíme, aby $S \notin (N_1 \cup N_2)$.
    2.  $\Sigma = \Sigma_1 \cup \Sigma_2$
    3.  $P = P_1 \cup P_2 \cup \{S \to \alpha_1 \mid \alpha_2 \mid \dots \}$, kde $\alpha_1, \alpha_2, \dots$ jsou pravé strany pravidel pro neterminály $S_1$ a $S_2$. Pokud je ovšem v některé z gramatik $G_1$ nebo $G_2$ u počátečního neterminálu $\varepsilon$-pravidlo, toto pravidlo do gramatiky $G$ v rámci pravidel $P_1$ a $P_2$ nekopírujeme. V tomto případě přidáme $\varepsilon$-pravidlo pouze k počátečnímu neterminálu $S$.

    Neterminály $S_1$ a $S_2$ jsou nedosažitelné, tedy v gramatice zbytečné a lze je případně z gramatiky odstranit.

<a id="algo-soucin-rg"></a>
!!! Algorithm "Součin jazyků"

    ### Součin jazyků {#algo-soucin-rg}

    Máme dvě regulární gramatiky $G_1 = (N_1, \Sigma_1, P_1, S_1)$ a $G_2 = (N_2, \Sigma_2, P_2, S_2)$. Jak vytvoříme **regulární gramatiku** $G$ generující **součin jazyků** $L(G_1)$ a $L(G_2)$, tedy jazyk $L = L(G_1) \cdot L(G_2)$?

    Gramatiku $G = (N, \Sigma, P, S)$ vytvoříme následovně:

    1.  $N = N_1 \cup N_2$
        Za předpokladu, že $N_1 \cap N_2 = \emptyset$, sjednotíme množiny neterminálů. Pokud tato rovnost neplatí, postupujeme obdobně jako v případě sjednocení – tj. využijeme přejmenování.
    2.  $\Sigma = \Sigma_1 \cup \Sigma_2$
    3.  $S = S_1$
    4.  Do množiny přepisovacích pravidel $P$ přidáme:
        *   všechna pravidla z množin $P_1$ a $P_2$ ve tvaru $A \to aB$ ($A, B \in N, a \in \Sigma$),
        *   všechna pravidla z množiny $P_2$ ve tvaru $A \to a$ ($A \in N_2, a \in \Sigma$),
        *   všechna pravidla ve tvaru $A \to aS_2$ ($A \in N_1, a \in \Sigma$), kde pravidlo $(A \to a) \in P_1$,
        *   pokud gramatika $G_2$ obsahuje $\varepsilon$-pravidlo u počátečního neterminálu, přidáme všechna pravidla ve tvaru $A \to a$ ($A \in N_1, a \in \Sigma$), kde pravidlo $(A \to a) \in P_1$,
        *   pokud gramatika $G_1$ obsahuje $\varepsilon$-pravidlo u počátečního neterminálu, v gramatice $G$ přidáme navíc k počátečnímu neterminálu $S$ všechny pravé strany neterminálu $S_2$ z gramatiky $G_2$.

<a id="algo-iterace-rg"></a>
!!! Algorithm "Iterace jazyka"

    ### Iterace jazyka {#algo-iterace-rg}

    Máme regulární gramatiku $G_1 = (N_1, \Sigma_1, P_1, S_1)$. Jak vytvoříme **regulární gramatiku** $G$ generující **iteraci jazyka** $L(G_1)$, tedy jazyk $L = L(G_1)^*$?

    Gramatiku $G = (N, \Sigma, P, S)$ vytvoříme následovně:

    1.  $N = N_1 \cup \{S\}$
        Za předpokladu, že $S$ je nový neterminální symbol, který se nenachází v množině $N_1$ (tj. $N_1 \cap \{S\} = \emptyset$), jej přidáme k množině $N_1$.
    2.  $\Sigma = \Sigma_1$
    3.  Do množiny přepisovacích pravidel $P$ přidáme:
        *   všechna pravidla z množiny $P_1$ ve tvaru $A \to a$ nebo $A \to aB$ ($A, B \in N, a \in \Sigma$),
        *   všechna pravidla ve tvaru $A \to aS_1$ ($A \in N, a \in \Sigma$), kde pravidlo $(A \to a) \in P_1$,
        *   k počátečnímu neterminálu $S$ přidáme $\varepsilon$-pravidlo a všechny pravé strany neterminálu $S_1$ z gramatiky $G_1$. Pokud pravá strana neterminálu $S_1$ v $G_1$ obsahovala terminál, pak tam toto pravidlo přidáme podruhé. Nyní však s neterminálem $S_1$ připojeným na konec tohoto pravidla.

<a id="algo-odstraneni-kolize"></a>
!!! Algorithm "Odstranění kolize"

    ### Odstranění kolize $\varepsilon$-pravidla a výskytu S na pravé straně {#algo-odstraneni-kolize}

    Jak se u **jinak regulární gramatiky** zbavíme souběžného výskytu $\varepsilon$-pravidla u počátečního neterminálu $S$ a výskytu $S$ na pravé straně pravidel?

    $$
    \begin{aligned}
    S &\to \varepsilon \mid aS \mid \dots \\
    A &\to bS \mid \dots \\
    &\dots
    \end{aligned}
    \quad \Rightarrow \quad
    \begin{aligned}
    S' &\to \varepsilon \mid aS \mid a \mid \dots \\
    S &\to aS \mid a \mid \dots \\
    A &\to bS \mid b \mid \dots \\
    &\dots
    \end{aligned}
    $$

    Vytvoříme nový počáteční neterminál $S'$ s pravidlem $S' \to \varepsilon$. U původního počátečního neterminálu $\varepsilon$-pravidlo odstraníme. Všechny pravé strany pravidel pro neterminál $S$ přidáme též k neterminálu $S'$. Nalezneme všechna pravidla v gramatice, která obsahují $S$ na pravé straně pravidel. Pro tato pravidla přidáme do gramatiky i variantu bez neterminálu $S$. Zbytek gramatiky ponecháme beze změny.